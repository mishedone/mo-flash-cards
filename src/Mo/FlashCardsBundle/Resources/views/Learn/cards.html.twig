{% extends 'MoFlashCardsBundle::layout.html.twig' %}

{% block title %}{{ 'learnCards.meta.title'|trans({'%deck%': deck.name}) }}{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            <div id="card-player-question">{{ 'learnCards.message.loading'|trans }}</div>
            <input id="card-player-answer" type="text" class="form-control" placeholder="{{ 'learnCards.form.placeholder.answer'|trans }}">
            <button id="card-player-show-hint" class="btn btn-default btn-primary">{{ 'learnCards.action.hint'|trans }}</button>
            <div id="card-player-hint"></div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {% javascripts 
        '@jquery_js'
        '@MoFlashCardsBundle/Resources/public/js/CardPlayer.js' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
        
    <script>
        $(document).ready(function() {
            var player = new CardPlayer({
                finishMessage: '{{ 'learnCards.message.finish'|trans }}'
            });
            
            // load deck cards from the api
            $.getJSON('{{ path('_api_cards', {'deckSlug': deck.slug}) }}', function(cards) {
                $.each(cards, function(key, val) {
                    player.addCard(val.question, val.answer);
                });
                
                // start the player
                player.start();
            });
        });
    </script>
{% endblock %}
